
Test INLINE/EXTENDS into a MACRO

@@MACRO(CHECK)@@
@@SET@@ P1 = $1
@@SET@@ P2 = $2
@@SET@@ P3 = $3
L1: $1:@_$1_@ $2:@_$2_@ $3:@_$3_@ P1:@_P1_@ P2:@_P2_@ P3:@_P3_@
@@INLINE@@
L2: $1:@_$1_@ $2:@_$2_@ $3:@_$3_@ P1:@_P1_@ P2:@_P2_@ P3:@_P3_@
@@IF@@ @_COND1_@
L3: $1:@_$1_@ $2:@_$2_@ $3:@_$3_@ P1:@_P1_@ P2:@_P2_@ P3:@_P3_@
@@ELSE@@
L4: $1:@_$1_@ $2:@_$2_@ $3:@_$3_@ P1:@_P1_@ P2:@_P2_@ P3:@_P3_@
@@END_IF@@
@@IF@@ @_COND2_@
L5: $1:@_$1_@ $2:@_$2_@ $3:@_$3_@ P1:@_P1_@ P2:@_P2_@ P3:@_P3_@
@@ELSE@@
L6: $1:@_$1_@ $2:@_$2_@ $3:@_$3_@ P1:@_P1_@ P2:@_P2_@ P3:@_P3_@
@@END_IF@@
L7: $1:@_$1_@ $2:@_$2_@ $3:@_$3_@ P1:@_P1_@ P2:@_P2_@ P3:@_P3_@
@@END_INLINE@@
L8: $1:@_$1_@ $2:@_$2_@ $3:@_$3_@ P1:@_P1_@ P2:@_P2_@ P3:@_P3_@

@@EXTENDS@@ incl.tmplt @_$1_@ @_P2_@ @_$3_@ azerty
@@BLOCK(DEF)@@
L9: $1:@_$1_@ $2:@_$2_@ $3:@_$3_@ $4:@_$4_@ P1:@_P1_@ P2:@_P2_@ P3:@_P3_@
@@END_BLOCK@@
@@END_EXTENDS@@
@@END_MACRO@@

1/3:
@_CHECK(1 => ONE, 3 => THREE)_@

2:
@_CHECK(2 => TWO)_@
